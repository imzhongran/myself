<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style>
*{ margin:0; padding:0}
body{ background:#000;}
.gallery{ width:980px; height:500px;}
.center{ position:absolute; top:0; bottom:0; left:0; right:0; margin:auto;}
.item{ width:196px; height:100px; position:absolute; background:#fff; transition:transform 1s;}
.pic{ width:100%; height:100%; transition:transform 1s;}
</style>
<script src="js/jquery-1.11.3.min.js"></script>
<script>
$(function(){
	
	init();
	showall();
	
	function init(){
		for(var i=0;i<25;i++){
			var x=i%5;
			var y=parseInt(i/5);
			$('<div class="item"><div class="pic"></div></div>').css({
				'left':x*196+'px',
				'top':y*100+'px'	
			}).appendTo($('.gallery'));
		}
	}
	
	function showall(){
		$('.item').each(function(index) {
			var x=index%5;
			var y=parseInt(index/5);
			var deg=Math.random()*60-30;
            $(this).css({'transform':'translate('+(x-2)*50+'px,'+(y-2)*50+'px) rotate('+deg+'deg)'})
			$(this).children('.pic').css({
				'background-image':'url(images/'+index+'.jpg)',
				'background-size':'cover',
				'transform':'scale(0.95,0.9)'
			})
        });
	}
	
	function showitem(index){
		$('.item').each(function(i) {
        	var x=i%5;
			var y=parseInt(i/5);
            $(this).css({'transform':'translate(0) rotate(0deg)'})
			$(this).children('.pic').css({
				'background-image':'url(images/'+index+'.jpg)',
				'background-size':'auto',
				'background-position':x*(-196)+'px '+y*(-100)+'px',
				'transform':'scale(1)'
			})
        });
	}
	
	var isshowall=true;
	$('.item').click(function(){
		var index=$(this).index();
		if(isshowall){
			showitem(index);
		}else{
			showall();	
		}
		isshowall=!isshowall;
	})
	
})


</script>
</head>

<body>
<div class="gallery center"></div>
</body>
</html>
